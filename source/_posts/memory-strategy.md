---
title: JVM内存分配策略
date: 2017-10-10 16:57:51
cdn: "header-off"
header-img: "./img/jvm.jpg"
tags:
	- JVM
	- Java
---
> 对象的内存分配，往大方向讲，就是在堆上分配（但也可能经过JIT编译后被拆散为标量类型并间接地栈上分配），对象主要分配在新生代的Eden区上，如果启动了本地现成分配缓冲，将按线程优先在TLAB上分配。少数情况下也可能会直接分配在老年代中，分配的规则并不是百分之百固定的，其细节取决于当前使用的是哪一种垃圾收集器组合，还有虚拟机中与内存相关的参数设置。
> ——《深入理解Java虚拟机》
## 对象优先在Eden分配
   大多数情况下，对象在新生代Eden区中分配。当Eden区没有足够空间进行分配时，虚拟机将发起一次Minor GC。在Minor GC执行的时候，存活下来的对象将被复制到Survivor区。如果Survivor没有足够空间的时候，将会有一部分对象被迁移到老年代。
   随着老年代

## 大对象直接进入老年代

## 长期存活的对象将进入老年代

## 动态对象年龄判定

## 空间分配担保